apiVersion: privatecloud.mendix.com/v1alpha1
kind: MendixApp
metadata:
  name: pibconfigurator
spec:
  database: # Specification of Database CR
    servicePlan: eph-db
  storage: # Specification of Storage CR
    servicePlan: eph-str
  mendixRuntimeVersion: 9.12.7.54456 # Mendix version to use for placeholder runtime image
  sourceURL: https://github.com/naveen-chikurthi/testapp/raw/main/PrivateCloudTesting-0.1.3.73.mda # URL of App's source MDA
  appURL: pibconfigurator.apps.openshift170220.des-non-prod.rnd.mendix.com # URL to access the app
  tls: # Optional, can be omitted : set a custom TLS configuration, overriding the default operator configuration
    # Enable or disable TLS for the app
    enableTLS: false    
  replicas: 1 # Number of replicas, set to 0 to stop all replicas
  resources: # Optional, can be omitted : set resources for Mendix Runtime container 
    limits: # Upper limit - process will be stopped if it tries to use more
      cpu: 500m # 500 millicores - half of a vCPU
      memory: 512Mi # 512 megabytes - suitable for small-scale non-production apps
    requests: # Lower limit - needs at least these resources
      cpu: 100m
      memory: 512Mi
  runtimeDeploymentPodAnnotations: # Optional, can be omitted : set custom annotations for Mendix Runtime Pods
    # example: inject the Linkerd proxy sidecar
    linkerd.io/inject: enabled
  runtime: # Configuration of the Mendix Runtime
    logAutosubscribeLevel: INFO # Default logging level
    mxAdminPassword: QWRtaW5UZXN0QDEyMzQ= # base64 encoded password for MendixAdmin user. In this example, 'Welc0me!'; can be left empty keep password unchanged
    debuggerPassword: QWRtaW5UZXN0QDEyMzQ= # base64 encoded password for debuggerPassword. In this example, 'Welc0me!';
    dtapMode: P # Security & runtime mode: P for production, D for development
    logLevels: # Optional, can be omitted : set custom log levels for specific nodes
      NodeOne: CRITICAL
      NodeTwo: DEBUG
    microflowConstants: # Optional, can be omitted : set values for microflow constants
      PIBConfigurator.AdminClientID: "admin-cli"
      PIBConfigurator.LogNode: "PIBConfigurator"
      PIBConfigurator.Password: "password"
      PIBConfigurator.Realm: "local-realm"
      PIBConfigurator.ServerBaseUrl: "http://keycloak/auth/"
      PIBConfigurator.Username: "admin"
      Administration.EnableMendixSSOUserMigration: "False"
      MendixSSO.AuthRequestExpiryDurationInMinutes: "60"
      MendixSSO.BatchSize: "10000"
      MendixSSO.ConsentToDeleteIncompatibleUsers: "False"
      MendixSSO.EncryptionPrefix: "{AES2}"
      MendixSSO.EnvironmentPassword: "<Password will be generated by the Mendix Cloud>"
      MendixSSO.EnvironmentUUID: "<EnvironmentUUID will be generated by the Mendix Cloud>"
      MendixSSO.IndexPage: "/index.html"
      MendixSSO.LogNode: "MendixSSO"
      MendixSSO.OpenIdConnectDiscoveryPath: ".well-known/openid-configuration"
      MendixSSO.OpenIdConnectProvider: "https://sso.mendix.com"
      MendixSSO.OpenIdConnectScopes: "openid mx:user:profile:v1:read offline_access"
      MendixSSO.RolesLocation: "https://roles.mendix.com"
      MendixSSO.SignupHint: ""
      MendixSSO.SilentAuthentication: "False"
      MendixSSO.SSOEnabled: "False"
      MendixSSO.SupportEmail: "support@mendix.com"
      MendixSSO.SupportEmailSubject: "SSO Error"
      MendixSSO.TokenEncryptionKey: "<TokenEncryptionKey will be generated by the Mendix Cloud>"
      MendixSSO.TokenExpiryInSeconds: "2592000"
      MendixSSO.TokenValidatorMaxClockSkew: "60"
      MendixSSO.TryAgainText: "Home"
      MendixSSO.Version: "3.0.0"
      NanoflowCommons.Nanoflow_Commons_Version: "2.1.0"
      WebActions.WebActions_Version: "2.4.0"
    scheduledEventExecution: NONE # Optional, can be omitted: specify which scheduled events should be enabled: ALL/NONE/SPECIFIED
    # Mendix Runtime Jetty options, in JSON format; validated and applied by the mx-m2ee-sidecar container
    jettyOptions: |-
      {
        "max_form_content_size": 10485760,
        "use_blocking_connector": false
      }      
    # All custom Mendix Runtime parameters go here, in JSON format; validated and applied by the mx-m2ee-sidecar container
    customConfiguration: |-
      {
        "ApplicationRootUrl": "https://pibconfigurator.apps.openshift170220.des-non-prod.rnd.mendix.com"
      }      
